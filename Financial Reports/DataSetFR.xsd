<?xml version="1.0" encoding="utf-8"?>
<xs:schema id="DataSetFR" targetNamespace="http://tempuri.org/DataSetFR.xsd" xmlns:mstns="http://tempuri.org/DataSetFR.xsd" xmlns="http://tempuri.org/DataSetFR.xsd" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:msprop="urn:schemas-microsoft-com:xml-msprop" attributeFormDefault="qualified" elementFormDefault="qualified">
  <xs:annotation>
    <xs:appinfo source="urn:schemas-microsoft-com:xml-msdatasource">
      <DataSource DefaultConnectionIndex="1" FunctionsComponentName="QueriesTableAdapter" Modifier="AutoLayout, AnsiClass, Class, Public" SchemaSerializationMode="IncludeSchema" xmlns="urn:schemas-microsoft-com:xml-msdatasource">
        <Connections>
          <Connection AppSettingsObjectName="MySettings" AppSettingsPropertyName="ProjetexDB2" IsAppSettingsProperty="true" Modifier="Assembly" Name="ProjetexDB2 (MySettings)" ParameterPrefix="@" PropertyReference="ApplicationSettings.Financial_Reports.My.MySettings.GlobalReference.Default.ProjetexDB2" Provider="FirebirdSql.Data.FirebirdClient" />
          <Connection ConnectionStringObject="character set=UTF8;initial catalog=&quot;E:\Program Files (x86)\AIT\Projetex 9\Projetex Server\Database\projetex.fdb&quot;;data source=192.168.0.56;user id=ODBC;password=password;role=PROJETEX_ODBC" IsAppSettingsProperty="false" Modifier="Assembly" Name="192.168.0.56 (projetex)" ParameterPrefix="@" Provider="FirebirdSql.Data.FirebirdClient" />
        </Connections>
        <Tables>
          <TableAdapter BaseClass="System.ComponentModel.Component" DataAccessorModifier="AutoLayout, AnsiClass, Class, Public" DataAccessorName="DTReport1TA" GeneratorDataComponentClassName="DTReport1TA" Name="DTReport1" UserDataComponentName="DTReport1TA">
            <MainSource>
              <DbSource ConnectionRef="192.168.0.56 (projetex)" DbObjectName="" DbObjectType="Unknown" FillMethodModifier="Public" FillMethodName="Fill" GenerateMethods="Both" GenerateShortCommands="false" GeneratorGetMethodName="GetData" GeneratorSourceName="Fill" GetMethodModifier="Public" GetMethodName="GetData" QueryType="Rowset" ScalarCallRetval="System.Object, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" UseOptimisticConcurrency="false" UserGetMethodName="GetData" UserSourceName="Fill">
                <SelectCommand>
                  <DbCommand CommandType="Text" ModifiedByUser="true">
                    <CommandText>SELECT  

distinct p3.proj_id, 
p3.proj_full, 
a17."AIT$USER_REALNAME",
IIF((select SUM(c9.cjob_total_b) from cjobs c9 where p3.proj_id=c9.proj_id)&gt;0,(select SUM(c9.cjob_total_b) from cjobs c9 where p3.proj_id=c9.proj_id),0) as "CJobs",
IIF((select SUM(r6.rjob_total_b) from rjobs r6 where p3.proj_id=r6.proj_id)&gt;0,(select SUM(r6.rjob_total_b) from rjobs r6 where p3.proj_id=r6.proj_id),0) as "RJobs",
c3.ccon_name,

IIF((select SUM(c9.cjob_total_b) from cjobs c9 where p3.proj_id=c9.proj_id)&gt;0,(select SUM(c9.cjob_total_b) from cjobs c9 where p3.proj_id=c9.proj_id)-(select SUM(r6.rjob_total_b) from rjobs r6 where p3.proj_id=r6.proj_id),0) as "Profit",

IIF((select SUM(c9.cjob_total_b) from cjobs c9 where p3.proj_id=c9.proj_id)&gt;0, ((select SUM(c9.cjob_total_b) from cjobs c9 where p3.proj_id=c9.proj_id)-(select SUM(r6.rjob_total_b) from rjobs r6 where p3.proj_id=r6.proj_id))/(((select SUM(c9.cjob_total_b) 
from cjobs c9 where p3.proj_id=c9.proj_id))/100),0) "% Profit",

MAX((select c8.cinv_gnumb from cinvoices c8 where c8.cinv_id=c9.cinv_id and c9.proj_id=p3.proj_id)) as "Inv No"

FROM  PROJECTS p3 INNER JOIN
        CCONTACTS c3 ON p3.CLIENT_ID = c3.CLIENT_ID AND p3.CLIENT_PM = c3.CCON_ID INNER JOIN
        CACCMANAGERS ca ON ca.CLIENT_ID = c3.CLIENT_ID INNER join
         CJOBS c9 ON p3.PROJ_ID = c9.PROJ_ID AND c3.CCON_ID = c9.CCON_ID INNER JOIN
        CINVOICES c8 ON c3.CCON_ID = c8.CCON_ID AND c9.CINV_ID = c8.CINV_ID
        INNER JOIN "AIT$USERS" a17 ON ca."AIT$USER_ID" = a17."AIT$USER_ID"                  
WHERE        (p3.PROJ_COMPLETED &gt;@fromdate) AND (p3.PROJ_COMPLETED &lt; @todate)
GROUP BY  p3.proj_id, p3.proj_full, a17."AIT$USER_REALNAME", c3.ccon_name

ORDER BY  p3.proj_id
</CommandText>
                    <Parameters>
                      <Parameter AllowDbNull="false" AutogeneratedName="fromdate" ColumnName="PROJ_COMPLETED" DataSourceName="" DataTypeServer="DbType.DateTime(8)" DbType="DateTime" Direction="Input" ParameterName="@fromdate" Precision="0" Scale="0" Size="8" SourceColumn="PROJ_COMPLETED" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="false" AutogeneratedName="todate" ColumnName="PROJ_COMPLETED" DataSourceName="" DataTypeServer="DbType.DateTime(8)" DbType="DateTime" Direction="Input" ParameterName="@todate" Precision="0" Scale="0" Size="8" SourceColumn="PROJ_COMPLETED" SourceColumnNullMapping="false" SourceVersion="Current" />
                    </Parameters>
                  </DbCommand>
                </SelectCommand>
              </DbSource>
            </MainSource>
            <Mappings>
              <Mapping SourceColumn="PROJ_ID" DataSetColumn="PROJ_ID" />
              <Mapping SourceColumn="PROJ_FULL" DataSetColumn="PROJ_FULL" />
              <Mapping SourceColumn="AIT$USER_REALNAME" DataSetColumn="AIT$USER_REALNAME" />
              <Mapping SourceColumn="CJobs" DataSetColumn="CJOBS" />
              <Mapping SourceColumn="RJobs" DataSetColumn="RJOBS" />
              <Mapping SourceColumn="CCON_NAME" DataSetColumn="CCON_NAME" />
              <Mapping SourceColumn="Profit" DataSetColumn="Profit" />
              <Mapping SourceColumn="% Profit" DataSetColumn="PCProfit" />
              <Mapping SourceColumn="Inv No" DataSetColumn="InvNo" />
            </Mappings>
            <Sources />
          </TableAdapter>
          <TableAdapter BaseClass="System.ComponentModel.Component" DataAccessorModifier="AutoLayout, AnsiClass, Class, Public" DataAccessorName="DTReport2TA" GeneratorDataComponentClassName="DTReport2TA" Name="DTReport2" UserDataComponentName="DTReport2TA">
            <MainSource>
              <DbSource ConnectionRef="192.168.0.56 (projetex)" DbObjectType="Unknown" FillMethodModifier="Public" FillMethodName="Fill" GenerateMethods="Both" GenerateShortCommands="false" GeneratorGetMethodName="GetData" GeneratorSourceName="Fill" GetMethodModifier="Public" GetMethodName="GetData" QueryType="Rowset" ScalarCallRetval="System.Object, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" UseOptimisticConcurrency="false" UserGetMethodName="GetData" UserSourceName="Fill">
                <SelectCommand>
                  <DbCommand CommandType="Text" ModifiedByUser="true">
                    <CommandText>SELECT  CACCOUNTS.CACC_NAME as SaleOwner,
        CCONTACTS.CCON_NAME AS ContactName,
        INVOICES.CINV_DATE as InvoiceDate,
        INVOICES.CINV_GNUMB as InvoiceNumber,
        CLIENTS.CLIENT_NAME AS PartyName,
        CURR.CURR_NAME as Currency,
        INVOICES.CINV_TOTAL AS TotalAmount,
        COALESCE(INVOICES.CINV_TOTAL-TOTALPAYMENTS.TOTALPAID,INVOICES.CINV_TOTAL) AS PendingAmount,
        TOTALPAYMENTS.TOTALPAID AS ActuallyPaid,
        INVOICES.CINV_PLAN_SETTL_DATE AS DueDate,
        datediff(day, INVOICES.CINV_PLAN_SETTL_DATE, @when) AS Overdue
FROM CINVOICES INVOICES 
    INNER JOIN CURR ON CURR.CURR_ID=INVOICES.CURR_ID
    LEFT JOIN   (SELECT  cf.CINV_ID, SUM(cf.LINK_SUM) as TOTALPAID
                        FROM CFINLINKS cf INNER JOIN
                        CINVOICES ci ON cf.CINV_ID = ci.CINV_ID
                        GROUP BY cf.CINV_ID) AS TOTALPAYMENTS 
                ON TOTALPAYMENTS.CINV_ID=INVOICES.CINV_ID
    LEFT JOIN CCONTACTS ON INVOICES.CCON_ID=CCONTACTS.CCON_ID
    LEFT JOIN CLIENTS ON CLIENTS.CLIENT_ID=INVOICES.CLIENT_ID
    LEFT JOIN CACCOUNTS ON CACCOUNTS.CLIENT_ID=INVOICES.CLIENT_ID
WHERE COALESCE(INVOICES.CINV_TOTAL-TOTALPAYMENTS.TOTALPAID,INVOICES.CINV_TOTAL) &gt; 0
ORDER BY Overdue</CommandText>
                    <Parameters>
                      <Parameter AllowDbNull="false" AutogeneratedName="when" ColumnName="" DataSourceName="" DataTypeServer="unknown" DbType="AnsiString" Direction="Input" ParameterName="@when" Precision="0" Scale="0" Size="1024" SourceColumn="" SourceColumnNullMapping="false" SourceVersion="Current" />
                    </Parameters>
                  </DbCommand>
                </SelectCommand>
              </DbSource>
            </MainSource>
            <Mappings>
              <Mapping SourceColumn="SALEOWNER" DataSetColumn="SALEOWNER" />
              <Mapping SourceColumn="CONTACTNAME" DataSetColumn="CONTACTNAME" />
              <Mapping SourceColumn="INVOICEDATE" DataSetColumn="INVOICEDATE" />
              <Mapping SourceColumn="INVOICENUMBER" DataSetColumn="INVOICENUMBER" />
              <Mapping SourceColumn="PARTYNAME" DataSetColumn="PARTYNAME" />
              <Mapping SourceColumn="TOTALAMOUNT" DataSetColumn="TOTALAMOUNT" />
              <Mapping SourceColumn="PENDINGAMOUNT" DataSetColumn="PENDINGAMOUNT" />
              <Mapping SourceColumn="ACTUALLYPAID" DataSetColumn="ACTUALLYPAID" />
              <Mapping SourceColumn="DUEDATE" DataSetColumn="DUEDATE" />
              <Mapping SourceColumn="OVERDUE" DataSetColumn="OVERDUE" />
              <Mapping SourceColumn="CURRENCY" DataSetColumn="CURRENCY" />
            </Mappings>
            <Sources />
          </TableAdapter>
        </Tables>
        <Sources />
      </DataSource>
    </xs:appinfo>
  </xs:annotation>
  <xs:element name="DataSetFR" msdata:IsDataSet="true" msdata:UseCurrentLocale="true" msprop:EnableTableAdapterManager="True" msprop:Generator_DataSetName="DataSetFR" msprop:Generator_UserDSName="DataSetFR">
    <xs:complexType>
      <xs:choice minOccurs="0" maxOccurs="unbounded">
        <xs:element name="DTReport1" msprop:Generator_TableClassName="DTReport1DataTable" msprop:Generator_TableVarName="tableDTReport1" msprop:Generator_TablePropName="DTReport1" msprop:Generator_RowDeletingName="DTReport1RowDeleting" msprop:Generator_RowChangingName="DTReport1RowChanging" msprop:Generator_RowEvHandlerName="DTReport1RowChangeEventHandler" msprop:Generator_RowDeletedName="DTReport1RowDeleted" msprop:Generator_UserTableName="DTReport1" msprop:Generator_RowChangedName="DTReport1RowChanged" msprop:Generator_RowEvArgName="DTReport1RowChangeEvent" msprop:Generator_RowClassName="DTReport1Row">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="PROJ_ID" msprop:Generator_ColumnVarNameInTable="columnPROJ_ID" msprop:Generator_ColumnPropNameInRow="PROJ_ID" msprop:Generator_ColumnPropNameInTable="PROJ_IDColumn" msprop:Generator_UserColumnName="PROJ_ID" type="xs:int" />
              <xs:element name="PROJ_FULL" msprop:Generator_ColumnVarNameInTable="columnPROJ_FULL" msprop:Generator_ColumnPropNameInRow="PROJ_FULL" msprop:Generator_ColumnPropNameInTable="PROJ_FULLColumn" msprop:Generator_UserColumnName="PROJ_FULL" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="160" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="AIT_x0024_USER_REALNAME" msprop:Generator_ColumnVarNameInTable="_columnAIT_USER_REALNAME" msprop:Generator_ColumnPropNameInRow="_AIT_USER_REALNAME" msprop:Generator_ColumnPropNameInTable="_AIT_USER_REALNAMEColumn" msprop:Generator_UserColumnName="AIT$USER_REALNAME">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="100" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="CJOBS" msprop:Generator_ColumnVarNameInTable="columnCJOBS" msprop:Generator_ColumnPropNameInRow="CJOBS" msprop:Generator_ColumnPropNameInTable="CJOBSColumn" msprop:Generator_UserColumnName="CJOBS" type="xs:string" minOccurs="0" />
              <xs:element name="RJOBS" msprop:Generator_ColumnVarNameInTable="columnRJOBS" msprop:Generator_ColumnPropNameInRow="RJOBS" msprop:Generator_ColumnPropNameInTable="RJOBSColumn" msprop:Generator_UserColumnName="RJOBS" type="xs:string" minOccurs="0" />
              <xs:element name="CCON_NAME" msprop:Generator_ColumnVarNameInTable="columnCCON_NAME" msprop:Generator_ColumnPropNameInRow="CCON_NAME" msprop:Generator_ColumnPropNameInTable="CCON_NAMEColumn" msprop:Generator_UserColumnName="CCON_NAME" type="xs:string" minOccurs="0" />
              <xs:element name="Profit" msprop:Generator_ColumnVarNameInTable="columnProfit" msprop:Generator_ColumnPropNameInRow="Profit" msprop:Generator_ColumnPropNameInTable="ProfitColumn" msprop:Generator_UserColumnName="Profit" type="xs:string" minOccurs="0" />
              <xs:element name="PCProfit" msprop:Generator_ColumnVarNameInTable="columnPCProfit" msprop:Generator_ColumnPropNameInRow="PCProfit" msprop:Generator_ColumnPropNameInTable="PCProfitColumn" msprop:Generator_UserColumnName="PCProfit" type="xs:string" minOccurs="0" />
              <xs:element name="InvNo" msprop:Generator_ColumnVarNameInTable="columnInvNo" msprop:Generator_ColumnPropNameInRow="InvNo" msprop:Generator_ColumnPropNameInTable="InvNoColumn" msprop:Generator_UserColumnName="InvNo" type="xs:string" minOccurs="0" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="DTReport2" msprop:Generator_TableClassName="DTReport2DataTable" msprop:Generator_TableVarName="tableDTReport2" msprop:Generator_TablePropName="DTReport2" msprop:Generator_RowDeletingName="DTReport2RowDeleting" msprop:Generator_RowChangingName="DTReport2RowChanging" msprop:Generator_RowEvHandlerName="DTReport2RowChangeEventHandler" msprop:Generator_RowDeletedName="DTReport2RowDeleted" msprop:Generator_UserTableName="DTReport2" msprop:Generator_RowChangedName="DTReport2RowChanged" msprop:Generator_RowEvArgName="DTReport2RowChangeEvent" msprop:Generator_RowClassName="DTReport2Row">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="SALEOWNER" msprop:Generator_ColumnVarNameInTable="columnSALEOWNER" msprop:Generator_ColumnPropNameInRow="SALEOWNER" msprop:Generator_ColumnPropNameInTable="SALEOWNERColumn" msprop:Generator_UserColumnName="SALEOWNER" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="100" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="CONTACTNAME" msprop:Generator_ColumnVarNameInTable="columnCONTACTNAME" msprop:Generator_ColumnPropNameInRow="CONTACTNAME" msprop:Generator_ColumnPropNameInTable="CONTACTNAMEColumn" msprop:Generator_UserColumnName="CONTACTNAME" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="80" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="INVOICEDATE" msprop:Generator_ColumnVarNameInTable="columnINVOICEDATE" msprop:Generator_ColumnPropNameInRow="INVOICEDATE" msprop:Generator_ColumnPropNameInTable="INVOICEDATEColumn" msprop:Generator_UserColumnName="INVOICEDATE" type="xs:dateTime" />
              <xs:element name="INVOICENUMBER" msprop:Generator_ColumnVarNameInTable="columnINVOICENUMBER" msprop:Generator_ColumnPropNameInRow="INVOICENUMBER" msprop:Generator_ColumnPropNameInTable="INVOICENUMBERColumn" msprop:Generator_UserColumnName="INVOICENUMBER" type="xs:int" minOccurs="0" />
              <xs:element name="PARTYNAME" msprop:Generator_ColumnVarNameInTable="columnPARTYNAME" msprop:Generator_ColumnPropNameInRow="PARTYNAME" msprop:Generator_ColumnPropNameInTable="PARTYNAMEColumn" msprop:Generator_UserColumnName="PARTYNAME" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="150" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="TOTALAMOUNT" msprop:Generator_ColumnVarNameInTable="columnTOTALAMOUNT" msprop:Generator_ColumnPropNameInRow="TOTALAMOUNT" msprop:Generator_ColumnPropNameInTable="TOTALAMOUNTColumn" msprop:Generator_UserColumnName="TOTALAMOUNT" type="xs:decimal" />
              <xs:element name="PENDINGAMOUNT" msprop:Generator_ColumnVarNameInTable="columnPENDINGAMOUNT" msprop:Generator_ColumnPropNameInRow="PENDINGAMOUNT" msprop:Generator_ColumnPropNameInTable="PENDINGAMOUNTColumn" msprop:Generator_UserColumnName="PENDINGAMOUNT" type="xs:decimal" minOccurs="0" />
              <xs:element name="ACTUALLYPAID" msprop:Generator_ColumnVarNameInTable="columnACTUALLYPAID" msprop:Generator_ColumnPropNameInRow="ACTUALLYPAID" msprop:Generator_ColumnPropNameInTable="ACTUALLYPAIDColumn" msprop:Generator_UserColumnName="ACTUALLYPAID" type="xs:decimal" minOccurs="0" />
              <xs:element name="DUEDATE" msprop:Generator_ColumnVarNameInTable="columnDUEDATE" msprop:Generator_ColumnPropNameInRow="DUEDATE" msprop:Generator_ColumnPropNameInTable="DUEDATEColumn" msprop:Generator_UserColumnName="DUEDATE" type="xs:dateTime" minOccurs="0" />
              <xs:element name="OVERDUE" msprop:Generator_ColumnVarNameInTable="columnOVERDUE" msprop:Generator_ColumnPropNameInRow="OVERDUE" msprop:Generator_ColumnPropNameInTable="OVERDUEColumn" msprop:Generator_UserColumnName="OVERDUE" type="xs:long" minOccurs="0" />
              <xs:element name="CURRENCY" msprop:Generator_ColumnVarNameInTable="columnCURRENCY" msprop:Generator_ColumnPropNameInRow="CURRENCY" msprop:Generator_ColumnPropNameInTable="CURRENCYColumn" msprop:Generator_UserColumnName="CURRENCY">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="3" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:choice>
    </xs:complexType>
  </xs:element>
</xs:schema>